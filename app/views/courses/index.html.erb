<div class="results-row">
  <div class="container special">
    <div class="row">
      <!-- left side -->
      <div class="col-xs-12 col-md-3">
        <div class="filter-container filters-card">
          <%= simple_form_for :criteria, url: courses_path, :method => :get do |f| %>
          <div>

          </div>

          <!-- <div class="small-placeholder"></div> -->

          <ul class="filter ul-reset">
            <li class="filter-item">
              <h3 class="filter-item-inner-heading minus"> Knowledge level
              </h3>
              <ul class="filter-attribute-list ul-reset">
                <div class="filter-attribute-list-inner">
                  <li class="filter-attribute-item">
                    <%= label_select("knowledge_level", @levels, "beginner") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("knowledge_level", @levels, "intermediate") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("knowledge_level", @levels, "advanced") %>
                  </li>
                </div>
              </ul>
            </li>
            <li class="filter-item">
              <h3 class="filter-item-inner-heading minus"> Platform
              </h3>
              <ul class="filter-attribute-list ul-reset">
                <div class="filter-attribute-list-inner">
                  <li class="filter-attribute-item">
                    <%= label_select("platform", @platforms, "udemy") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("platform", @platforms, "udacity") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("platform", @platforms, "edx") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("platform", @platforms, "futureLearn") %>
                  </li>
                </div>
              </ul>
            </li>

            <li class="filter-item">
              <h3 class="filter-item-inner-heading minus"> Price
              </h3>
              <ul class="filter-attribute-list ul-reset">
                <div class="filter-attribute-list-inner">
                  <li class="filter-attribute-item">
                    <%= label_select("price", @prices, "Free") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("price",@prices, "Paid") %>
                  </li>
                </div>
              </ul>
            </li>

            <li class="filter-item">
              <h3 class="filter-item-inner-heading minus"> Completion time
              </h3>
              <ul class="filter-attribute-list ul-reset">
                <div class="filter-attribute-list-inner">
                  <li class="filter-attribute-item">
                    <%= label_select("completion_time", @completion_times, "> 1 week") %>
                  </li>
                  <li class="filter-attribute-item">
                    <%= label_select("completion_time", @completion_times, "< 1 week") %>
                  </li>
                </div>
              </ul>
            </li>
          </ul>
          <div>
            <%= f.hidden_field :search, value: @search_input %>
            <!-- submit button -->
            <%= f.button :submit, "Search", class: "button-white-sidebar"%>
            <%= button_to "Clear", "#", class: "uncheck-all btn button-white-sidebar-inv" %>
          </div>
          <% end %>
          <!-- filter-container -->
        </div>
        <!-- COL LEFT SIDE -->
      </div>

      <!-- right side -->
      <div class="col-xs-12 col-md-9">
        <div class="container1">


          <!-- search -->
          <div class="box" id="index-search-box">
            <%= simple_form_for :criteria, url: courses_path,
                  wrapper: :inline_form,
                  html: { class: "form-inline index-search-form"},
                  wrapper_mappings: {
                  boolean: :inline_boolean}, :method => :get do |f| %>

              <%= f.input :search, id: "search", as: :string, input_html: {value: @search_input || ''} %>
              <%= f.button :submit, "Hunt", class: "button-green-primary" %>
              <% end %>
            </div>



            <!-- result information -->
          <div class="result-title">
            <p> <%= page_entries_info @courses, entry_name: 'courses' %> </p>
          </div>

        </div>


          <% @courses.each do |course| %>
          <% course_id = course.id %>
          <% bookmarks = Bookmark.where(course_id: course_id) %>
          <% num_of_bookmarks = bookmarks.count %>
          <div class="box-flex card-medium first-card">
            <div class="card-content-left">
              <div class="card-description">
                <h3 class="heading"><%=course.title%></h3>
              </div>
              <div class="paragraph">
                <% desc_as_text = Truncato.truncate course.description, max_length: 400 %>
                <%= desc_as_text.html_safe %>
                <!-- desc_as_text.truncate(27, escape: false) -->
              </div>
              <div class="bookmark-rating">
                <p class ="paragraph">This course has been bookmarked by <%= num_of_bookmarks %> users</p>
              </div>
            </div>
            <div class="card-content-right">
              <div class="icon-next">
                <i class="fas fa-graduation-cap"></i>
                <p><%= course.knowledge_level %></p>
              </div>
              <div class="icon-next">
                <i class="far fa-clock"></i>
                <p><%= course.duration%></p>
              </div>
              <div class="icon-next">
                <i class="fas fa-coins"></i>
                <p><%= course.price %></p>
              </div>
              <div class="card-button">

               <%= link_to("See Details", course_path(course, criteria: {search: @search_input, knowledge_level: @levels, platform: @platforms, price: @prices, completion_time: @completion_times}), class: "button-green-primary") %>

             </div>
           </div>
         </div>
         <% end %>
         <!-- container1 -->
         <div class="indent-next-buttons">
          <%= link_to_previous_page @courses, 'Previous Page', class: "button-red-secondary" %>
          <%= link_to_next_page @courses, 'Next Page', class: "button-green-secondary" %>
        </div>
        <!-- CONTAINER -->
      </div>
      <!-- col -->
    </div>
    <!-- row -->
  </div>
  <!-- container special -->
</div>
<!-- results row -->
</div>

